#!/usr/bin/env resty -c 65535

-- a flag to detect whether our modules (especially kong.core.globalpatches)
-- are running under resty-cli or in a real ngx_lua, runtime environment.
ngx.RESTY_CLI = true

-- require global patches, to enable dns resolution by the internal client
-- initializing the dns client is done in `./kong/conf_loader.lua` 
require "kong.core.globalpatches"

if ngx ~= nil then
  ngx.exit = function()end
end

require("kong.cmd.init")(arg)
